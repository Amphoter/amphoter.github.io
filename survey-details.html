<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Деталі опитування — Yuppa Flow</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>

  <div id="header"></div>

  <main class="container" id="content">
    <div class="center">Завантаження...</div>
  </main>

  <div id="footer"></div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      // Load header and footer
      fetch('header.html')
        .then(r => r.text())
        .then(t => document.getElementById('header').innerHTML = t);

      fetch('footer.html')
        .then(r => r.text())
        .then(t => document.getElementById('footer').innerHTML = t);

      // Get survey ID from URL
      const params = new URLSearchParams(window.location.search);
      const surveyId = params.get('id');
      const content = document.getElementById('content');

      if (!surveyId) {
        content.innerHTML = '<div class="center">ID опитування не вказано.</div>';
        return;
      }

      // Fetch survey details
      fetch(`https://stressapi.onrender.com/api/public/questionarries/${surveyId}`, {
        headers: { accept: 'text/plain' }
      })
        .then(r => r.json())
        .then(survey => {
          content.innerHTML = `
            <h1>${survey.name || 'Без назви'}</h1>
            <p>${survey.description || 'Опис відсутній.'}</p>
            <a href="survey-flow.html?id=${survey.id}" class="start-button">Почати опитування</a>
          `;
        })
        .catch(error => {
          console.error('Survey fetch error:', error);
          content.innerHTML = '<div class="center">Не вдалося завантажити деталі опитування.</div>';
        });
    });
  </script>
</body>
</html>
